!function(){"use strict";angular.module("cmmcMqttws",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ngMaterial"])}(),angular.module("cmmcMqttws").provider("mqttwsFactory",function(){console.log("mqttwsFactory"),this.$get=function(){function t(){o=new Paho.MQTT.Client(e,n,"web_"+parseInt(100*Math.random(),10));var u={timeout:3,useSSL:r,cleanSession:c,onSuccess:function(){var t=l.connected||function(){};console.log("DEFAULT SUCCESS",arguments),t.call(null,arguments)},onFailure:function(e){console.log("failed"),setTimeout(t,s)}};null!=a&&(u.userName=a,u.password=i),o.connect(u),o.onMessageArrived=function(t){var e=t.destinationName,n=t.payloadString,o=l.message||function(){};o.apply(null,[e,n,t])}}var e,n,o,r=!1,a=null,i=null,c=!0,s=2e3,l={};return function(r){console.log("OPTIONS:",r);var a={on:function(t,e){l[t]=e},addListener:function(){},subscribe:function(t,e){o?o.subscribe(t,e||{qos:0}):console.log("MQTT CONNECTION FAILED")},connect:function(){t()}};console.log("mqttwsFactory execute"),r=r||{},e=r.host||"rabbit.cmmc.ninja",n=r.port||8e3;r.callback;return a}}}),angular.module("cmmcMqttws").service("mqttService",function(){this.connect=function(t){console.log(t),userOnConnected=t.onSuccess||function(){},userOnMessageArrived=t.onMessageArrived||function(){},null!=mqtt&&mqtt.disconnect(),mqtt.onConnectionLost=function(t){setTimeout(MQTTconnect,reconnectTimeout),console.log("connection lost: "+t.errorMessage+". Reconnecting")},mqtt.onMessageArrived=function(t){t.destinationName,t.payloadString;userOnMessageArrived(t)}}}),angular.module("cmmcMqttws").factory("devicesMqtt",["mqttwsFactory",function(t){var e={},n=t(e);return n}]).controller("devicesCtrl",["$scope","devicesMqtt",function(t,e){t.devices={},e.on("connected",function(){console.log("MQTT CONNECTED","IN CONTROLLR"),e.subscribe("esp8266/+/status")}),e.on("message",function(e,n){var n=JSON.parse(n);t.devices[n.d.id]=n,t.devices[n.info&&n.info.id]=n,delete t.devices.undefined,t.$apply()}),e.connect()}]),function(){"use strict";function t(){function t(){return e}var e=[{title:"AngularJS",url:"https://angularjs.org/",description:"HTML enhanced for web apps!",logo:"angular.png"},{title:"BrowserSync",url:"http://browsersync.io/",description:"Time-saving synchronised browser testing.",logo:"browsersync.png"},{title:"GulpJS",url:"http://gulpjs.com/",description:"The streaming build system.",logo:"gulp.png"},{title:"Jasmine",url:"http://jasmine.github.io/",description:"Behavior-Driven JavaScript.",logo:"jasmine.png"},{title:"Karma",url:"http://karma-runner.github.io/",description:"Spectacular Test Runner for JavaScript.",logo:"karma.png"},{title:"Protractor",url:"https://github.com/angular/protractor",description:"End to end test framework for AngularJS applications built on top of WebDriverJS.",logo:"protractor.png"},{title:"Angular Material Design",url:"https://material.angularjs.org/#/",description:"The Angular reference implementation of the Google's Material Design specification.",logo:"angular-material.png"},{title:"Sass (Ruby)",url:"http://sass-lang.com/",description:"Original Syntactically Awesome StyleSheets implemented in Ruby",logo:"ruby-sass.png"}];this.getTec=t}angular.module("cmmcMqttws").service("webDevTec",t)}(),function(){"use strict";function t(){function t(t){var e=this;e.relativeDate=t(e.creationDate).fromNow()}var e={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["moment"],e}angular.module("cmmcMqttws").directive("acmeNavbar",t)}(),function(){"use strict";function t(t){function e(e,n,o,r){var a,i=t(n[0],{typeSpeed:40,deleteSpeed:40,pauseDelay:800,loop:!0,postfix:" "});n.addClass("acme-malarkey"),angular.forEach(e.extraValues,function(t){i.type(t).pause()["delete"]()}),a=e.$watch("vm.contributors",function(){angular.forEach(r.contributors,function(t){i.type(t.login).pause()["delete"]()})}),e.$on("$destroy",function(){a()})}function n(t,e){function n(){return o().then(function(){t.info("Activated Contributors View")})}function o(){return e.getContributors(10).then(function(t){return r.contributors=t,r.contributors})}var r=this;r.contributors=[],n()}var o={restrict:"E",scope:{extraValues:"="},template:"&nbsp;",link:e,controller:n,controllerAs:"vm"};return n.$inject=["$log","githubContributor"],o}angular.module("cmmcMqttws").directive("acmeMalarkey",t),t.$inject=["malarkey"]}(),function(){"use strict";function t(t,e){function n(n){function r(t){return t.data}function a(e){t.error("XHR Failed for getContributors.\n"+angular.toJson(e.data,!0))}return n||(n=30),e.get(o+"/contributors?per_page="+n).then(r)["catch"](a)}var o="https://api.github.com/repos/Swiip/generator-gulp-angular",r={apiHost:o,getContributors:n};return r}angular.module("cmmcMqttws").factory("githubContributor",t),t.$inject=["$log","$http"]}(),function(){"use strict";function t(t,e,n,o,r){function a(){c(),t(function(){s.classAnimation="rubberBand"},4e3)}function i(){n.info('Fork <a href="https://github.com/Swiip/generator-gulp-angular" target="_blank"><b>generator-gulp-angular</b></a>'),s.classAnimation=""}function c(){s.awesomeThings=e.getTec(),angular.forEach(s.awesomeThings,function(t){t.rank=Math.random()})}console.log(o),r.myName={},o.on("connected",function(){console.log("MQTT CONNECTED","IN CONTROLLR"),o.subscribe("esp8266/#")}),o.on("message",function(t,e){var n={};try{n=angular.fromJson(e)}catch(o){console.log("EX",o)}r.myName[n.d&&n.d.myName]=t,delete r.myName.undefined,r.payload=e,r.$apply()}),o.connect(),r.loadUsers=function(){var t=Object.keys(r.myName);r.users=t.map(function(t,e,n){return{id:e,name:t}})};var s=this;s.awesomeThings=[],s.classAnimation="",s.creationDate=1435662498687,s.showToastr=i,a()}angular.module("cmmcMqttws").factory("myMqtt",["mqttwsFactory",function(t){var e={},n=t(e);return n}]).controller("MainController",t),t.$inject=["$timeout","webDevTec","toastr","myMqtt","$scope"]}(),function(){"use strict";function t(t){t.debug("runBlock end")}angular.module("cmmcMqttws").run(t),t.$inject=["$log"]}(),function(){"use strict";function t(t,e){t.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("devices",{url:"/devices",templateUrl:"app/devices/partials/devices.html",controller:"devicesCtrl",controllerAs:"devices"}),e.otherwise("/")}angular.module("cmmcMqttws").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("cmmcMqttws").constant("malarkey",malarkey).constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function t(t,e){t.debugEnabled(!0),e.options.timeOut=3e3,e.options.positionClass="toast-top-right",e.options.preventDuplicates=!0,e.options.progressBar=!0}angular.module("cmmcMqttws").config(t),t.$inject=["$logProvider","toastr"]}(),angular.module("cmmcMqttws").run(["$templateCache",function(t){t.put("app/main/main.html",'<div layout="vertical" layout-fill="" layout-align="center"><md-content><header><md-toolbar layout="row" layout-align="center center"><md-button href="https://github.com/Swiip/generator-gulp-angular">CMMC</md-button><section flex="" layout="row" layout-align="left center"><md-button href="#" class="md-raised" ng-click="">Choice</md-button><md-button href="#" class="md-raised">Text</md-button></section></md-toolbar></header><section class="jumbotron"><h1>{{ command }}</h1><p class="lead"><img src="assets/images/yeoman.png" alt="I\'m Yeoman"><br></p><section flex="" layout="row" layout-align="center"><md-button ng-click="enable(1)" href="#" class="md-raised">เปิด</md-button><md-button ng-click="enable(0)" href="#" class="md-raised">ปิด</md-button></section><section flex="" layout="row" layout-align="center"><input ng-model="sendText" type="text"></section><p class="lead">{{ sendText }}</p><p class="lead" ng-show="payload">{{ payload }}</p></section><section flex="" layout="row" layout-align="center"><md-select ng-model="user" md-on-open="loadUsers()" style="min-width: 200px;"><md-select-label>{{ user ? user.name : \'Filter\' }}</md-select-label><md-option ng-value="user" ng-repeat="user in users">{{user.name}}</md-option></md-select></section><section flex="" layout="row" layout-align="center"><input ng-model="myName[user.name]" type="text"><md-button ng-click="connect()" href="#" class="md-raised">connect</md-button></section><div layout="column" layout-align="center center" style="height: 100px;"><p class="md-caption">Selected: {{ user ? myName[user.name] : \'No one yet\' }}</p></div></md-content></div>'),t.put("app/components/navbar/navbar.html",'<md-toolbar layout="row" layout-align="center center"><md-button href="https://github.com/Swiip/generator-gulp-angular">Gulp Angular</md-button><section flex="" layout="row" layout-align="left center"><md-button href="#" class="md-raised">Home</md-button><md-button href="#" class="md-raised">About</md-button><md-button href="#" class="md-raised">Contact</md-button></section><md-button class="acme-navbar-text">Application was created {{ vm.relativeDate }}.</md-button></md-toolbar>'),t.put("app/devices/partials/devices.html",'<div ng-controller="devicesCtrl"><md-content><md-list><md-subheader class="md-no-sticky">Devices</md-subheader><md-list-item class="md-3-line" ng-repeat="item in devices | orderBy:\'-updated\'"><img ng-src="{{item.face}}?{{$index}}" class="md-avatar" alt="{{item.who}}"><div class="md-list-item-text"><h3>{{ item.d.myName }}</h3><h4>{{ item.d.id || item.info.id }}</h4><p>{{ item.d.seconds }}</p><p>{{ item.d }}</p><p>{{ item.d.heap}}</p><p>{{ item.updated }}</p></div></md-list-item><md-divider></md-divider></md-list></md-content></div>')}]);